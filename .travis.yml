language: node_js
node_js: stable

install:
  - export TZ='Asia/Beijing'
  - npm install -g hexo
  - npm install -g hexo-cli
  - npm set audit false  ## https://docs.npmjs.com/getting-started/running-a-security-audit
  - npm install


before_script:
  - git config --global user.name "aimobier"
  - git config --global user.email "200739491@qq.com"

  - sed -i'' "s~git@github.com:${UName}/${PName}.git~https://${github}:x-oauth-basic@github.com/${UName}/${PName}.git~" _config.yml

  # - git clone https://github.com/aimobier/Hexo-Theme themes/jingwen
  # - ls
  # - pwd
  # - cp -rf source/themes_config.yml themes/next/_config.yml
  # - cp -rf source/404.html themes/next/source/404.html

script:

  - hexo clean
  - hexo g

after_success:

 - hexo deploy

branches:
  only:
    - make-blog
env:
 global:
   - UName: aimobier
   - PName: aimobier.github.io
